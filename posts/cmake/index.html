<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<meta name="robots" content="index, follow">












<title>CMake Intro</title>



<meta name="title" content="CMake Intro">


<meta name="author" content="Adam D">


<meta property="og:type" content="website">
<meta property="og:url" content="https://adamdusty.github.io/posts/cmake/">

<meta property="og:site_name" content="">


<meta property="og:title" content="CMake Intro">





<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://adamdusty.github.io/posts/cmake/">

<meta property="twitter:title" content="CMake Intro">




<link rel="canonical" href="https://adamdusty.github.io/posts/cmake/">




<link rel="stylesheet" href="https://adamdusty.github.io/css/style.css"/>

<script src="https://adamdusty.github.io/js/script.js" defer></script>


</head>
<body>
    <div class="wrapper">
      <header>
          

  


  <nav class="navBar">
    
      <a href="&#x2F;" class="">
        
        &#x2F;home
      </a>
    
      <a href="&#x2F;posts" class="">
        
        &#x2F;posts
      </a>
    

  <div class="themeSwitch">
    
    <button class="themeButton light" onclick="setTheme('light')" title="Light mode"><svg class="icons icons__background"><use href="https://adamdusty.github.io/icons.svg#lightMode"></use></svg></button>
    <button class="themeButton dark" onclick="setTheme('dark')" title="Dark mode"><svg class="icons icons__background"><use href="https://adamdusty.github.io/icons.svg#darkMode"></use></svg></button>

    
  </div>
</nav>


      </header>
      <main>
          
<div><a href="..">..</a>/<span class="metaData">cmake</span></div>

<h1>CMake Intro</h1>


<address rel="author">Author: <span class="metaData">Adam D</span></address>



<time datetime="2023-11-20">Published on: <span class="metaData">2023-11-20</span></time>




<h3 id="resources">Resources</h3>
<ul>
<li><a rel="noopener" target="_blank" href="https://cmake.org/cmake/help/latest/index.html">CMake documentation</a></li>
<li><a rel="noopener" target="_blank" href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html">CMake Supported Generators</a></li>
</ul>
<h3 id="notes">Notes</h3>
<p><strong>Windows [Visual Studio]</strong><br />
It can be difficult to set up your development environment on windows. I've never used CMake with Visual Studio, but I know CMake can generate Visual Studio build files. If you're using visual studio, this may or may not work.</p>
<p><strong>Windows [Generators]</strong><br />
You will need a build system for CMake to generate. <a rel="noopener" target="_blank" href="https://ninja-build.org/">Ninja</a> is a common one that is easy to get on most platforms. If you're using mingw, your mingw distribution likely includes a version of make.</p>
<p><strong>MacOS</strong><br />
I don't own one nor have I ever developed on one, so I have no idea if cmake even makes sense as a build system.</p>
<h2 id="first-steps">First steps</h2>
<p>First lets see how to set up a basic hello world.</p>
<pre data-lang="ascii" style="background-color:#282a36;color:#f8f8f2;" class="language-ascii "><code class="language-ascii" data-lang="ascii"><span>+-- hello
</span><span>|   +-- CMakeLists.txt
</span><span>|   +-- src
</span><span>|   |   +-- hello.hpp
</span><span>|   |   +-- hello.cpp
</span></code></pre>
<pre data-lang="cpp" style="background-color:#282a36;color:#f8f8f2;" class="language-cpp "><code class="language-cpp" data-lang="cpp"><span style="color:#6272a4;">// hello.hpp
</span><span style="color:#ff79c6;">#pragma</span><span> once
</span><span>
</span><span style="color:#ff79c6;">#include </span><span style="color:#f1fa8c;">&lt;iostream&gt;
</span><span>
</span><span style="color:#ff79c6;">namespace </span><span>hello</span><span style="color:#ffffff;">{
</span><span>    </span><span style="font-style:italic;color:#8be9fd;">auto </span><span style="color:#50fa7b;">greet</span><span>() </span><span style="color:#ffffff;">{
</span><span>        std</span><span style="color:#ff79c6;">::</span><span>cout </span><span style="color:#ff79c6;">&lt;&lt; </span><span style="color:#f1fa8c;">&quot;Hello world!</span><span style="color:#ff79c6;">\n</span><span style="color:#f1fa8c;">&quot;</span><span>; 
</span><span>    </span><span style="color:#ffffff;">}
</span><span style="color:#ffffff;">}
</span></code></pre>
<pre data-lang="cpp" style="background-color:#282a36;color:#f8f8f2;" class="language-cpp "><code class="language-cpp" data-lang="cpp"><span style="color:#6272a4;">// hello.cpp
</span><span style="color:#ff79c6;">#include </span><span style="color:#f1fa8c;">&quot;hello.hpp&quot;
</span><span>
</span><span style="font-style:italic;color:#8be9fd;">auto </span><span style="color:#50fa7b;">main</span><span>() -&gt; </span><span style="font-style:italic;color:#8be9fd;">int </span><span style="color:#ffffff;">{
</span><span>    hello</span><span style="color:#ff79c6;">::</span><span style="color:#50fa7b;">greet</span><span>();
</span><span>    </span><span style="color:#ff79c6;">return </span><span style="color:#bd93f9;">0</span><span>;
</span><span style="color:#ffffff;">}
</span></code></pre>
<p>Now we can build up our CMakeLists.txt file.</p>
<pre data-lang="cmake" style="background-color:#282a36;color:#f8f8f2;" class="language-cmake "><code class="language-cmake" data-lang="cmake"><span style="color:#6272a4;"># Start by specifying the minimum cmake version.
</span><span style="color:#6272a4;"># To be safe, just use whatever version you get when you run `cmake --version`.
</span><span style="color:#6272a4;"># This sets the minimum cmake version for anyone trying to build from this cmake file.
</span><span style="color:#8be9fd;">cmake_minimum_required</span><span>(</span><span style="font-style:italic;color:#ffb86c;">VERSION </span><span>3.27.2)
</span><span>
</span><span style="color:#6272a4;"># The project command is used to set a project name, version, included languages, descriptions, and
</span><span style="color:#6272a4;"># other project information. For now, only a name is necessary.
</span><span style="color:#8be9fd;">project</span><span>(hello_proj)
</span><span>
</span><span style="color:#6272a4;"># Next, create an executable target with the `add_executable` command.
</span><span style="color:#8be9fd;">add_executable</span><span>(hello)
</span><span>
</span><span style="color:#6272a4;"># Add your source files to your target, to be compiled.
</span><span style="color:#8be9fd;">target_sources</span><span>(hello </span><span style="font-style:italic;color:#ffb86c;">PRIVATE
</span><span>    src/hello.cpp
</span><span>)
</span></code></pre>
<p>Generate your build configuration by running <code>cmake -S . -B build</code> from the top level <code>hello</code> directory. If you get an error, you may need to specify a generator. Remove the <code>build</code> directory generated by cmake before trying again. <a rel="noopener" target="_blank" href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html">Here</a> is a list of CMake supported generators. In which case the command will look like one of these:</p>
<pre data-lang="sh" style="background-color:#282a36;color:#f8f8f2;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#50fa7b;">cmake</span><span style="font-style:italic;color:#ffb86c;"> -S</span><span> .</span><span style="font-style:italic;color:#ffb86c;"> -B</span><span> build</span><span style="font-style:italic;color:#ffb86c;"> -G</span><span> Ninja
</span><span style="color:#50fa7b;">cmake</span><span style="font-style:italic;color:#ffb86c;"> -S</span><span> .</span><span style="font-style:italic;color:#ffb86c;"> -B</span><span> build</span><span style="font-style:italic;color:#ffb86c;"> -G </span><span style="color:#f1fa8c;">&quot;MinGW MakeFiles&quot;
</span></code></pre>
<p>With your build configuration generated, run <code>cmake --build build</code>. There should be a file in the build directory <code>build/hello(.exe)</code>. Execute the file, and you should see <code>Hello world!</code> return in the terminal.</p>
<pre data-lang="sh" style="background-color:#282a36;color:#f8f8f2;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#ff79c6;">&gt;</span><span> build/hello  
</span><span style="color:#6272a4;"># Hello world!
</span></code></pre>


<p class="tagsData">
    
</p>

      </main>
      <footer>
          <hr>
<div class=footContainer>
  <div class="footLeft">
    <p>Licensed under <a target="_blank" rel="noopener noreferrer" href="https://fr.wikipedia.org/wiki/Licence_MIT">MIT</a><br>
      Built with <a target="_blank" rel="noopener noreferrer" href="https://www.getzola.org">Zola</a> using <a target="_blank" rel="noopener noreferrer" href="https://github.com/Speyll/anemone">anemone</a> theme &amp; <a target="_blank" rel="noopener noreferrer" href="https://github.com/Speyll/veqev">veqev</a> colors.<br>
    </p>
  </div>
  
</div>
      </footer>
    </div>
</body>
</html>